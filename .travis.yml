language: python

python:
 - "2.7"

virtualenv:
 system_site_packages: true

before_install:
 - sudo apt-get install gfortran libcfitsio3-dev python-matplotlib python-pyfits python-scipy
 - "export DISPLAY=:99.0"
 - "sh -e /etc/init.d/xvfb start"
 - pip install coveralls

install: 
 - pip install -r requirements.txt --use-mirrors
 - python setup.py build_ext --inplace

script:
 - nosetests --with-coverage --cover-package=oracle

after_success:
 - coveralls
 - 'echo "what $TRAVIS_PULL_REQUEST ";'
 - "if [[ $TRAVIS_PULL_REQUEST != 'false' ]]; then python science.py; fi"

notifications:
 email:
  - andycasey@gmail.com
